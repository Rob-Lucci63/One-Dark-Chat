<!DOCTYPE html>
<html lang="fa">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>One Ai - Ù‡ÙˆØ´ Ù…ØµÙ†ÙˆØ¹ÛŒ</title>
  <style>
    body { font-family: Tahoma, sans-serif; direction: rtl; background: #f4f4f4; margin: 0; padding: 0; }
    #chatContainer { max-width: 600px; margin: 20px auto; background: #fff; border-radius: 10px; padding: 20px; box-shadow: 0 0 15px #ccc; }
    h1 { text-align: center; color: #0074d9; margin-top: 0; }
    #messages { height: 400px; overflow-y: auto; padding: 10px; border: 1px solid #ccc; background: #fafafa; margin-bottom: 10px; }
    .message { margin: 6px 0; padding: 10px 14px; border-radius: 12px; max-width: 75%; clear: both; line-height: 1.6; }
    .user { background: #d0e6ff; float: left; }
    .bot { background: #eeeeee; float: right; }
    input[type=text] { width: calc(100% - 24px); padding: 10px; font-size: 15px; border-radius: 8px; border: 1px solid #ccc; }
    button { margin-top: 10px; width: 100%; padding: 10px; background: #0074d9; color: white; font-size: 15px; border: none; border-radius: 8px; cursor: pointer; }
    button:hover { background: #005fa3; }
    #footer { text-align: center; margin-top: 20px; color: gray; font-size: 14px; }
  </style>
</head>
<body>
<div id="chatContainer">
  <h1>ğŸ¤– One Ai (V0.0.3)</h1>
  <div id="messages"></div>
  <input type="text" id="userInput" placeholder="Ø¨Ù†ÙˆÛŒØ³ Ú†ÛŒ ØªÙˆ Ø°Ù‡Ù†ØªÙ‡..." onkeydown="if(event.key==='Enter') sendMessage();" />
  <button onclick="sendMessage()">Ø§Ø±Ø³Ø§Ù„</button>
  <div id="footer">Ø³Ø§Ø®ØªÙ‡ Ø´Ø¯Ù‡ ØªÙˆØ³Ø· Rob Lucci</div>
</div>
<script>
  const messages = document.getElementById('messages');
  const userInput = document.getElementById('userInput');
  let lastBotQuestion = null;

  // ØªØ§Ø¨Ø¹ ÙØ§ØµÙ„Ù‡ Levenshtein
  function levenshtein(a, b) {
    const matrix = [];
    for (let i = 0; i <= b.length; i++) { matrix[i] = [i]; }
    for (let j = 0; j <= a.length; j++) { matrix[0][j] = j; }
    for (let i = 1; i <= b.length; i++) {
      for (let j = 1; j <= a.length; j++) {
        matrix[i][j] = Math.min(
          matrix[i-1][j] + 1,
          matrix[i][j-1] + 1,
          matrix[i-1][j-1] + (b[i-1] === a[j-1] ? 0 : 1)
        );
      }
    }
    return matrix[b.length][a.length];
  }

  // Ø¯ÛŒÚ©Ø´Ù†Ø±ÛŒ Ø¨Ø§ 40+ ÙˆØ±ÙˆØ¯ÛŒ
  const dictionary = [
    { keywords: ['Ø³Ù„Ø§Ù…','Ø¯Ø±ÙˆØ¯'], answer: 'Ø³Ù„Ø§Ù… Ø±ÙÛŒÙ‚! Ø®ÙˆØ¨ÛŒØŸ ğŸŒŸ' },
    { keywords: ['Ø®ÙˆØ¨ÛŒ','Ú†Ø·ÙˆØ±ÛŒ','Ø­Ø§Ù„Øª'], answer: 'Ù…Ù† Ø¹Ø§Ù„ÛŒâ€ŒØ§Ù…ØŒ Ù…Ù…Ù†ÙˆÙ†! ØªÙˆ Ú†Ø·ÙˆØ±ÛŒØŸ' },
    { keywords: ['Ø§Ø³Ù…','ØªÙˆ Ú©ÛŒ Ù‡Ø³ØªÛŒ'], answer: 'Ù…Ù† One Ai Ù‡Ø³ØªÙ…ØŒ Ù‡ÙˆØ´ Ù…ØµÙ†ÙˆØ¹ÛŒ Ø®ÙˆØ¯Ù…ÙˆÙ†Ù‡! ğŸ˜Š' },
    { keywords: ['Ø±Ø¨Ø§Øª','Ù‡ÙˆØ´ Ù…ØµÙ†ÙˆØ¹ÛŒ'], answer: 'ÛŒÙ‡ Ø±Ø¨Ø§Øª Ù¾Ø± Ø§Ù†Ø±Ú˜ÛŒ Ø¨Ø±Ø§ÛŒ Ú†Øª Ø¨Ø§ ØªÙˆ Ù‡Ø³ØªÙ… ğŸ¤–' },
    { keywords: ['Ø¯ÙˆØ³Øª','Ø±ÙÛŒÙ‚','Ø±ÙØ§Ù‚Øª'], answer: 'Ø±ÙØ§Ù‚Øª Ù…Ø«Ù„ Ù…Ù‡Ø±Ø¨ÙˆÙ†ÛŒ Ø¨ÛŒâ€ŒÙ¾Ø§ÛŒØ§Ù†Ù ğŸŒˆ' },
    { keywords: ['Ø¹Ø´Ù‚','Ø¯ÙˆØ³Øª Ø¯Ø§Ø´ØªÙ†','Ø¹Ø§Ø´Ù‚'], answer: 'Ø¹Ø´Ù‚ Ø²ÛŒØ¨Ø§ØªØ±ÛŒÙ† Ø­Ø³Ù‡ØŒ ØªÙˆ Ú†ÛŒ ÙÚ©Ø± Ù…ÛŒâ€ŒÚ©Ù†ÛŒØŸ â¤ï¸' },
    { keywords: ['Ø¨Ø§Ø²ÛŒ','Ú¯ÛŒÙ…','Ø³Ø±Ú¯Ø±Ù…ÛŒ'], answer: 'Ø³Ø±Ú¯Ø±Ù…ÛŒØŸ Ù¾ÛŒØ´Ù†Ù‡Ø§Ø¯ Ù…Ù† Happy Coinâ€ŒÛŒÙ‡ ğŸ˜„' },
    { keywords: ['ÙÛŒÙ„Ù…','Ø³Ø±ÛŒØ§Ù„','Ø§Ù†ÛŒÙ…Ù‡'], answer: 'ÙÛŒÙ„Ù… Ú†Ù‡ Ú˜Ø§Ù†Ø±ÛŒ Ø¯ÙˆØ³Øª Ø¯Ø§Ø±ÛŒØŸ' },
    { keywords: ['Ù…ÙˆØ³ÛŒÙ‚ÛŒ','Ø¢Ù‡Ù†Ú¯','Ú¯ÙˆØ´ Ø¯Ø§Ø¯Ù†'], answer: 'Ú†Ù‡ Ø³Ø¨Ú©ÛŒ Ú¯ÙˆØ´ Ù…ÛŒâ€ŒØ¯ÛŒØŸ' },
    { keywords: ['Ú©ØªØ§Ø¨','Ù…Ø·Ø§Ù„Ø¹Ù‡','Ú©ØªØ§Ø¨Ø®ÙˆÙ†ÛŒ'], answer: 'Ú©ØªØ§Ø¨ Ø®ÙˆØ¨ Ù‡Ø³ØªØŸ Ù…ÙˆØ¶ÙˆØ¹Ø´ Ú†ÛŒÙ‡ØŸ' },
    { keywords: ['Ø³ÙØ±','Ù…Ø³Ø§ÙØ±Øª','Ú¯Ø±Ø¯Ø´'], answer: 'Ø¢ÛŒØ§ Ø·Ø¨ÛŒØ¹Øª ÛŒØ§ Ø´Ù‡Ø±Ú¯Ø±Ø¯ÛŒ Ø±Ùˆ ØªØ±Ø¬ÛŒØ­ Ù…ÛŒâ€ŒØ¯ÛŒØŸ' },
    { keywords: ['Ú©Ø§Ø±','Ø´ØºÙ„','Ø¯Ø±Ø¢Ù…Ø¯'], answer: 'Ø¯ÙˆØ³Øª Ø¯Ø§Ø±ÛŒ Ø¯Ø±Ø¨Ø§Ø±Ù‡ ÙØ±ØµØªâ€ŒÙ‡Ø§ÛŒ Ø¢Ù†Ù„Ø§ÛŒÙ† ØµØ­Ø¨Øª Ú©Ù†ÛŒÙ…ØŸ' },
    { keywords: ['ØªØ­ØµÛŒÙ„','Ø¯Ø±Ø³','Ù…Ø¯Ø±Ø³Ù‡','Ø¯Ø§Ù†Ø´Ú¯Ø§Ù‡'], answer: 'Ø±Ø´ØªÙ‡â€ŒØ§Øª Ú†ÛŒÙ‡ØŸ Ø¯ÙˆØ³Øª Ø¯Ø§Ø±ÛŒ Ø§Ø¯Ø§Ù…Ù‡ Ø¨Ø¯ÛŒØŸ' },
    { keywords: ['Ù‡Ø¯Ù','Ø¢ÛŒÙ†Ø¯Ù‡','Ø¨Ø±Ù†Ø§Ù…Ù‡'], answer: 'Ù‡Ø¯Ù Ø¢ÛŒÙ†Ø¯Ù‡â€ŒØª Ú†ÛŒÙ‡ØŸ' },
    { keywords: ['Ø²Ù†Ø¯Ú¯ÛŒ','ÙÙ„Ø³ÙÙ‡','Ù…Ø¹Ù†Ø§ÛŒ'], answer: 'Ø²Ù†Ø¯Ú¯ÛŒ Ø³ÙØ±Ù‡ØŒ Ø§Ø² Ù„Ø­Ø¸Ù‡â€ŒÙ‡Ø§ Ù„Ø°Øª Ø¨Ø¨Ø± ğŸŒ±' },
    { keywords: ['ÙˆØ±Ø²Ø´','Ø³Ù„Ø§Ù…ØªÛŒ','ØªÙ…Ø±ÛŒÙ†'], answer: 'Ú†Ù‡ ÙˆØ±Ø²Ø´ÛŒ Ø§Ù†Ø¬Ø§Ù… Ù…ÛŒâ€ŒØ¯ÛŒØŸ' },
    { keywords: ['Ø®ÙˆØ§Ø¨','Ø®Ø³ØªÙ‡','Ø§Ø³ØªØ±Ø§Ø­Øª'], answer: 'ÛŒÙ‡ Ú†Ø±Øª Ú©ÙˆØªØ§Ù‡ Ø¨Ø²Ù†ØŒ Ø§Ù†Ø±Ú˜ÛŒ Ø¨Ø±Ù…ÛŒâ€ŒÚ¯Ø±Ø¯Ù‡! ğŸ˜´' },
    { keywords: ['Ø¬ÙˆÚ©','Ù„Ø·ÛŒÙÙ‡','Ø®Ù†Ø¯Ù‡'], answer: 'Ø¬ÙˆÚ©: Ú†Ø±Ø§ ØµÙØ­Ù‡â€ŒÚ©Ù„ÛŒØ¯ Ø¯ÙˆØ³Øª Ø¨Ø±Ù†Ø§Ù…Ù‡â€ŒÙ†ÙˆÛŒØ³ Ù†ÛŒØ³ØªØŸ Ú†ÙˆÙ† enter Ù†Ø¯Ø§Ø±Ù‡! ğŸ˜‚' },
    { keywords: ['Ø¨Ø§ÛŒ','Ø®Ø¯Ø§Ø­Ø§ÙØ¸'], answer: 'Ø®Ø¯Ø§Ø­Ø§ÙØ¸ Ø±ÙÛŒÙ‚ØŒ Ø²ÙˆØ¯ Ø¨Ø±Ú¯Ø±Ø¯! ğŸ‘‹' },
    { keywords: ['Ø³Ù„Ø§Ù…Øª','ØªÙ†Ø¯Ø±Ø³ØªÛŒ'], answer: 'Ø³Ù„Ø§Ù…ØªÛŒ Ø§Ø² Ù‡Ù…Ù‡ Ú†ÛŒØ² Ù…Ù‡Ù…â€ŒØªØ±Ù‡ØŒ Ù…Ø±Ø§Ù‚Ø¨ Ø®ÙˆØ¯Øª Ø¨Ø§Ø´ ğŸ’ª' },
    { keywords: ['Ø§ÛŒÙ†ØªØ±Ù†Øª','Ù‚Ø·Ø¹','Ø³Ø±Ø¹Øª'], answer: 'Ø§ÛŒÙ†ØªØ±Ù†Øª Ø§Ø°ÛŒØªØª Ù…ÛŒâ€ŒÚ©Ù†Ù‡ØŸ Ø§Ù…ÛŒØ¯ÙˆØ§Ø±Ù… Ø²ÙˆØ¯ Ø¯Ø±Ø³Øª Ø¨Ø´Ù‡ ğŸŒ' },
    { keywords: ['ØºÙ…Ú¯ÛŒÙ†','Ø§ÙØ³Ø±Ø¯Ù‡','Ø­Ø§Ù„Ù… Ø¨Ø¯Ù‡'], answer: 'Ø§ÙˆÙ‡... Ø¨ÛŒØ§ ØµØ­Ø¨Øª Ú©Ù†ÛŒÙ…ØŒ Ø´Ø§ÛŒØ¯ Ø¢Ø±ÙˆÙ…Øª Ú©Ù†Ù‡ ğŸ’›' },
    { keywords: ['Ù¾Ù†ÛŒØ±','Ù¾ÛŒØªØ²Ø§','ØºØ°Ø§'], answer: 'Ø­Ø§Ù„Ø§ Ù‡ÙˆØ³ Ù¾ÛŒØªØ²Ø§ Ú©Ø±Ø¯ÛŒØŸ Ù…Ù†Ù… Ø¯Ù„Ù… Ø®ÙˆØ§Ø³Øª ğŸ˜‹' },
    { keywords: ['Ù…Ø§Ù‡','Ø¢Ø³Ù…Ø§Ù†','Ø³ØªØ§Ø±Ù‡'], answer: 'Ø´Ø§ÛŒØ¯ ÛŒÙ‡ Ø´Ø¨ Ø¨ÛŒØ±ÙˆÙ† Ø§Ø² Ø´Ù‡Ø± Ø³ØªØ§Ø±Ù‡â€ŒØ¨Ø§Ø²ÛŒ Ú©Ù†ÛŒÙ… âœ¨' },
    { keywords: ['Ù…Ø¯Ø±Ø³Ù‡','Ú©Ù„Ø§Ø³','ØªØ¯Ø±ÛŒØ³'], answer: 'Ø¯Ø±Ø³â€ŒÙ‡Ø§ Ù‡Ù…ÛŒØ´Ù‡ Ù…Ù‡Ù…Ù†ØŒ ØªÙ„Ø§Ø´ Ú©Ù†! ğŸ“š' },
    { keywords: ['Ú©Ø§Ø±Ø¨Ø±Ø¯','ÙÙ†Ø§ÙˆØ±ÛŒ','ØªÚ©Ù†ÙˆÙ„ÙˆÚ˜ÛŒ'], answer: 'ÙÙ†Ø§ÙˆØ±ÛŒ Ø¢ÛŒÙ†Ø¯Ù‡ Ø±Ùˆ Ù…ÛŒâ€ŒØ³Ø§Ø²Ù‡ØŒ Ø¨Ù‡Ø´ Ø¹Ù„Ø§Ù‚Ù‡ Ø¯Ø§Ø±ÛŒØŸ' },
    { keywords: ['Ø¹ÛŒØ¯','ØªØ¹Ø·ÛŒÙ„Ø§Øª','Ù…Ø±Ø®ØµÛŒ'], answer: 'ØªØ¹Ø·ÛŒÙ„Ø§Øª Ú†ÛŒâ€Œæ’’ØŸ Ù…ÛŒâ€ŒØ®ÙˆØ§ÛŒ Ø³ÙØ±ØŸ' },
    { keywords: ['Ø§Ù‚ØªØµØ§Ø¯','Ø¨Ø§Ø²Ø§Ø±','Ù¾ÙˆÙ„'], answer: 'Ø§Ù‚ØªØµØ§Ø¯ Ù‡Ù…ÛŒØ´Ù‡ Ù…Ù‡Ù…Ù‡ØŒ Ù†Ø¸Ø±Øª Ú†ÛŒÙ‡ØŸ' }
  ];

  function addMessage(text, sender) {
    const msg = document.createElement('div');
    msg.classList.add('message', sender);
    msg.textContent = text;
    messages.appendChild(msg);
    messages.scrollTop = messages.scrollHeight;
  }

  function findBestMatch(text) {
    let best = null, bestScore = Infinity;
    const words = text.split(/\s+/);
    for (let item of dictionary) {
      for (let kw of item.keywords) {
        for (let w of words) {
          const dist = levenshtein(w.toLowerCase(), kw.toLowerCase());
          if (dist < bestScore) {
            bestScore = dist;
            best = item;
          }
        }
      }
    }
    // Ø¢Ø³ØªØ§Ù†Ù‡ 2 ØªØºÛŒÛŒØ± ÛŒØ§ Ú©Ù…ØªØ±
    return bestScore <= 2 ? best : null;
  }

  function handleYesNo(text) {
    const yes = ['Ø¢Ø±Ù‡','Ø¨Ù„Ù‡','yes'];
    const no = ['Ù†Ù‡','no','Ø®ÛŒØ±'];
    const t = text.trim().toLowerCase();
    if (lastBotQuestion) {
      if (yes.includes(t)) {
        lastBotQuestion = null;
        return 'Ø¹Ø§Ø§Ø§Ù„ÛŒ! Ø§Ø¯Ø§Ù…Ù‡ Ø¨Ø¯ÛŒÙ… ğŸ˜Š';
      }
      if (no.includes(t)) {
        lastBotQuestion = null;
        return 'Ø¨Ø§Ø´Ù‡ØŒ Ù…ÙˆØ¶ÙˆØ¹ Ø±Ùˆ Ø¹ÙˆØ¶ Ú©Ù†ÛŒÙ…ØŸ';
      }
    }
    return null;
  }

  function sendMessage() {
    const text = userInput.value.trim();
    if (!text) return;
    addMessage(text, 'user');
    userInput.value = '';

    setTimeout(() => {
      // Ø¨Ø±Ø±Ø³ÛŒ Ø¬ÙˆØ§Ø¨ Ø¢Ø±Ù‡/Ù†Ù‡
      const yn = handleYesNo(text);
      if (yn) {
        addMessage(yn, 'bot');
        return;
      }

      // Ø¬Ø³ØªØ¬ÙˆÛŒ Ú©Ù„ÛŒØ¯ÙˆØ§Ú˜Ù‡ Ø¯Ù‚ÛŒÙ‚
      const lower = text.toLowerCase();
      let found = dictionary.find(item => item.keywords.some(kw => lower.includes(kw)));

      // Ø§Ú¯Ø± Ù¾ÛŒØ¯Ø§ Ù†Ú©Ø±Ø¯ØŒ Ø¬Ø³ØªØ¬ÙˆÛŒ ØªØ·Ø¨ÛŒÙ‚ÛŒ Ø¨Ø§ levenshtein
      if (!found) found = findBestMatch(lower);

      if (found) {
        addMessage(found.answer, 'bot');
        lastBotQuestion = found.answer.includes('ØŸ') ? found.answer : null;
      } else {
        addMessage('Ù…ØªÙˆØ¬Ù‡ Ù…Ù†Ø¸ÙˆØ±Øª Ù†Ø´Ø¯Ù…ØŒ Ù„Ø·ÙØ§Ù‹ ÙˆØ§Ø¶Ø­â€ŒØªØ± Ø¨Ú¯Ùˆ ğŸ˜…', 'bot');
        lastBotQuestion = null;
      }
    }, 500);
  }
</script>
</body>
</html>
